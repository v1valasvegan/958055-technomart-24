var storage,link=document.querySelector(".write-us-link"),popup=document.querySelector(".modal-write-us"),close=popup.querySelector(".modal-close"),form=popup.querySelector(".write-us-form"),nameWriteUs=popup.querySelector(".name-icon-write-us"),emailWriteUs=popup.querySelector(".email-icon-write-us"),letterWriteUs=popup.querySelector(".letter-icon-write-us"),isStorageSupport=!0,linkCart=document.querySelectorAll(".buy"),popupCart=document.querySelector(".modal-cart"),closeCart=popupCart.querySelector(".modal-close"),buyButton=popupCart.querySelector(".red-button"),popupMap=document.querySelector(".modal-map"),linkMap=document.querySelector(".delivery-map"),closeMap=popupMap.querySelector(".modal-close");try{storage=localStorage.getItem("nameWriteUs")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storage?(nameWriteUs.value=storage,emailWriteUs.value=localStorage.getItem("emailWriteUs"),letterWriteUs.focus()):nameWriteUs.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){emailWriteUs.value&&nameWriteUs.value?isStorageSupport&&(localStorage.setItem("nameWriteUs",nameWriteUs.value),localStorage.setItem("emailWriteUs",emailWriteUs.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error")))}),linkCart.forEach(function(e,t){e.addEventListener("click",function(e){e.preventDefault(),popupCart.classList.add("modal-show"),buyButton.focus()})}),closeCart.addEventListener("click",function(e){e.preventDefault(),popupCart.classList.remove("modal-show"),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupCart.classList.contains("modal-show")&&popupCart.classList.remove("modal-show"))})}),linkMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupMap.classList.contains("modal-show")&&popupMap.classList.remove("modal-show"))});